{"version":3,"file":"hooks.server-DlJz0FP3.js","sources":["../../../.svelte-kit/adapter-node/chunks/hooks.server.js"],"sourcesContent":["import { createClient } from \"redis\";\nimport { j as json } from \"./index.js\";\nfunction sequence(...handlers) {\n  const length = handlers.length;\n  if (!length) return ({ event, resolve }) => resolve(event);\n  return ({ event, resolve }) => {\n    return apply_handle(0, event, {});\n    function apply_handle(i, event2, parent_options) {\n      const handle2 = handlers[i];\n      return handle2({\n        event: event2,\n        resolve: (event3, options) => {\n          const transformPageChunk = async ({ html, done }) => {\n            if (options?.transformPageChunk) {\n              html = await options.transformPageChunk({ html, done }) ?? \"\";\n            }\n            if (parent_options?.transformPageChunk) {\n              html = await parent_options.transformPageChunk({ html, done }) ?? \"\";\n            }\n            return html;\n          };\n          const filterSerializedResponseHeaders = parent_options?.filterSerializedResponseHeaders ?? options?.filterSerializedResponseHeaders;\n          const preload = parent_options?.preload ?? options?.preload;\n          return i < length - 1 ? apply_handle(i + 1, event3, {\n            transformPageChunk,\n            filterSerializedResponseHeaders,\n            preload\n          }) : resolve(event3, { transformPageChunk, filterSerializedResponseHeaders, preload });\n        }\n      });\n    }\n  };\n}\nclass FluxRedis {\n  client = null;\n  isConnected = false;\n  initialized = false;\n  constructor() {\n  }\n  /**\n   * Initialize Redis client\n   */\n  async initializeClient() {\n    try {\n      const redisUrl = process.env.REDIS_URL;\n      if (!redisUrl) {\n        console.warn(\"[Flux Redis] REDIS_URL not provided, cache features will be disabled\");\n        return;\n      }\n      this.client = createClient({\n        url: redisUrl,\n        socket: {\n          connectTimeout: 5e3\n        }\n      });\n      this.client.on(\"connect\", () => {\n        console.log(\"[Flux Redis] Client connected to Redis\");\n        this.isConnected = true;\n      });\n      this.client.on(\"error\", (err) => {\n        console.error(\"[Flux Redis] Redis client error:\", err);\n        this.isConnected = false;\n      });\n      this.client.on(\"end\", () => {\n        console.log(\"[Flux Redis] Redis connection ended\");\n        this.isConnected = false;\n      });\n      await this.client.connect();\n      console.log(\"[Flux Redis] Redis client initialized and connected\");\n    } catch (error) {\n      console.error(\"[Flux Redis] Failed to initialize Redis client:\", error);\n    }\n  }\n  /**\n   * Ensure client is initialized\n   */\n  async ensureInitialized() {\n    if (!this.initialized) {\n      await this.initializeClient();\n      this.initialized = true;\n    }\n  }\n  /**\n   * Set a key-value pair with optional TTL\n   */\n  async set(key, value, ttlSeconds) {\n    try {\n      await this.ensureInitialized();\n      if (!this.client || !this.isConnected) {\n        console.warn(\"[Flux Redis] Redis not available for SET operation\");\n        return false;\n      }\n      const ttl = ttlSeconds || parseInt(process.env.CACHE_TTL_DEFAULT || \"3600\");\n      await this.client.setEx(key, ttl, value);\n      console.log(`[Flux Redis] SET ${key} (TTL: ${ttl}s)`);\n      return true;\n    } catch (error) {\n      console.error(\"[Flux Redis] SET error:\", { key, error: error?.toString() });\n      return false;\n    }\n  }\n  /**\n   * Get value by key\n   */\n  async get(key) {\n    try {\n      await this.ensureInitialized();\n      if (!this.client || !this.isConnected) {\n        console.warn(\"[Flux Redis] Redis not available for GET operation\");\n        return null;\n      }\n      const value = await this.client.get(key);\n      console.log(`[Flux Redis] GET ${key} - ${value ? \"HIT\" : \"MISS\"}`);\n      return value;\n    } catch (error) {\n      console.error(\"[Flux Redis] GET error:\", { key, error: error?.toString() });\n      return null;\n    }\n  }\n  /**\n   * Delete a key\n   */\n  async del(key) {\n    try {\n      await this.ensureInitialized();\n      if (!this.client || !this.isConnected) {\n        console.warn(\"[Flux Redis] Redis not available for DEL operation\");\n        return false;\n      }\n      const result = await this.client.del(key);\n      console.log(`[Flux Redis] DEL ${key} - ${result > 0 ? \"SUCCESS\" : \"NOT_FOUND\"}`);\n      return result > 0;\n    } catch (error) {\n      console.error(\"[Flux Redis] DEL error:\", { key, error: error?.toString() });\n      return false;\n    }\n  }\n  /**\n   * Check if key exists\n   */\n  async exists(key) {\n    try {\n      await this.ensureInitialized();\n      if (!this.client || !this.isConnected) {\n        console.warn(\"[Flux Redis] Redis not available for EXISTS operation\");\n        return false;\n      }\n      const exists = await this.client.exists(key);\n      return exists > 0;\n    } catch (error) {\n      console.error(\"[Flux Redis] EXISTS error:\", { key, error: error?.toString() });\n      return false;\n    }\n  }\n  /**\n   * Set TTL for a key\n   */\n  async expire(key, ttlSeconds) {\n    try {\n      await this.ensureInitialized();\n      if (!this.client || !this.isConnected) {\n        console.warn(\"[Flux Redis] Redis not available for EXPIRE operation\");\n        return false;\n      }\n      const result = await this.client.expire(key, ttlSeconds);\n      return result;\n    } catch (error) {\n      console.error(\"[Flux Redis] EXPIRE error:\", { key, ttlSeconds, error: error?.toString() });\n      return false;\n    }\n  }\n  /**\n   * Cache JSON data\n   */\n  async setJSON(key, data, ttlSeconds) {\n    try {\n      const serialized = JSON.stringify(data);\n      return await this.set(key, serialized, ttlSeconds);\n    } catch (error) {\n      console.error(\"[Flux Redis] JSON serialization error:\", { key, error: error?.toString() });\n      return false;\n    }\n  }\n  /**\n   * Get JSON data from cache\n   */\n  async getJSON(key) {\n    try {\n      const value = await this.get(key);\n      if (!value) return null;\n      return JSON.parse(value);\n    } catch (error) {\n      console.error(\"[Flux Redis] JSON deserialization error:\", { key, error: error?.toString() });\n      return null;\n    }\n  }\n  /**\n   * Health check for Redis connection\n   */\n  async healthCheck() {\n    try {\n      if (!process.env.REDIS_URL) {\n        return {\n          status: \"disabled\",\n          message: \"Redis not configured - REDIS_URL missing\",\n          details: {\n            note: \"Cache features are disabled in development\"\n          }\n        };\n      }\n      await this.ensureInitialized();\n      if (!this.client) {\n        return {\n          status: \"unhealthy\",\n          message: \"Redis client not initialized\",\n          details: {}\n        };\n      }\n      const start = Date.now();\n      const pingResult = await this.client.ping();\n      const duration = Date.now() - start;\n      if (pingResult === \"PONG\") {\n        return {\n          status: \"healthy\",\n          message: \"Redis connection successful\",\n          details: {\n            responseTime: `${duration}ms`,\n            connected: this.isConnected\n          }\n        };\n      } else {\n        return {\n          status: \"unhealthy\",\n          message: \"Redis ping failed\",\n          details: { pingResult }\n        };\n      }\n    } catch (error) {\n      return {\n        status: \"unhealthy\",\n        message: \"Redis connection failed\",\n        details: {\n          error: error?.toString()\n        }\n      };\n    }\n  }\n  /**\n   * Close Redis connection\n   */\n  async close() {\n    if (this.client) {\n      await this.client.quit();\n      this.client = null;\n      this.isConnected = false;\n      console.log(\"[Flux Redis] Redis connection closed\");\n    }\n  }\n  /**\n   * Get connection status\n   */\n  getStatus() {\n    return {\n      connected: this.isConnected,\n      ready: this.client?.isReady || false\n    };\n  }\n}\nconst fluxRedis = new FluxRedis();\nconst RATE_LIMITS = {\n  // General API endpoints\n  default: {\n    windowMs: 15 * 60 * 1e3,\n    // 15 minutes\n    maxRequests: 100\n  }\n};\nfunction createRateLimit(config) {\n  return async (event) => {\n    try {\n      const { request, getClientAddress } = event;\n      const clientIP = getClientAddress();\n      const key = config.keyGenerator ? config.keyGenerator(request, clientIP) : `flux:ratelimit:${clientIP}:${new URL(request.url).pathname}`;\n      const currentCountStr = await fluxRedis.get(key);\n      const currentCount = currentCountStr ? parseInt(currentCountStr) : 0;\n      if (currentCount >= config.maxRequests) {\n        console.warn(`[Flux Rate Limit] Limit exceeded for ${clientIP} on ${request.url}`);\n        return json(\n          {\n            success: false,\n            error: {\n              code: \"RATE_LIMIT_EXCEEDED\",\n              message: \"Too many requests, please try again later\",\n              details: {\n                limit: config.maxRequests,\n                windowMs: config.windowMs,\n                retryAfter: Math.ceil(config.windowMs / 1e3)\n              }\n            }\n          },\n          {\n            status: 429,\n            headers: {\n              \"Retry-After\": Math.ceil(config.windowMs / 1e3).toString(),\n              \"X-RateLimit-Limit\": config.maxRequests.toString(),\n              \"X-RateLimit-Remaining\": \"0\",\n              \"X-RateLimit-Reset\": (Date.now() + config.windowMs).toString()\n            }\n          }\n        );\n      }\n      const newCount = currentCount + 1;\n      const ttlSeconds = Math.ceil(config.windowMs / 1e3);\n      if (currentCount === 0) {\n        await fluxRedis.set(key, newCount.toString(), ttlSeconds);\n      } else {\n        await fluxRedis.set(key, newCount.toString());\n      }\n      console.log(`[Flux Rate Limit] ${clientIP} - ${newCount}/${config.maxRequests} requests`);\n      return null;\n    } catch (error) {\n      console.error(\"[Flux Rate Limit] Error in rate limiting middleware:\", error);\n      return null;\n    }\n  };\n}\nconst generalRateLimit = createRateLimit(RATE_LIMITS.default);\nasync function cacheResponse(cacheKey, response, ttl) {\n  try {\n    if (response.status < 200 || response.status >= 300) {\n      return;\n    }\n    const responseClone = response.clone();\n    const body = await responseClone.json();\n    const headers = {};\n    response.headers.forEach((value, key) => {\n      headers[key] = value;\n    });\n    const cacheData = {\n      status: response.status,\n      headers,\n      body,\n      timestamp: Date.now()\n    };\n    await fluxRedis.setJSON(cacheKey, cacheData, ttl);\n    console.log(`[Flux Cache] CACHED - ${cacheKey} (TTL: ${ttl}s)`);\n  } catch (error) {\n    console.error(\"[Flux Cache] Cache write error:\", { cacheKey, error });\n  }\n}\nconst corsMiddleware = async ({ event, resolve }) => {\n  if (event.request.method === \"OPTIONS\") {\n    return new Response(null, {\n      status: 200,\n      headers: {\n        \"Access-Control-Allow-Origin\": \"*\",\n        \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, PATCH, OPTIONS\",\n        \"Access-Control-Allow-Headers\": \"Content-Type, Authorization, X-Requested-With\",\n        \"Access-Control-Max-Age\": \"86400\"\n      }\n    });\n  }\n  const response = await resolve(event);\n  response.headers.set(\"Access-Control-Allow-Origin\", \"*\");\n  response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n  return response;\n};\nconst securityMiddleware = async ({ event, resolve }) => {\n  const response = await resolve(event);\n  response.headers.set(\"X-Content-Type-Options\", \"nosniff\");\n  response.headers.set(\"X-Frame-Options\", \"DENY\");\n  response.headers.set(\"X-XSS-Protection\", \"1; mode=block\");\n  response.headers.set(\"Referrer-Policy\", \"strict-origin-when-cross-origin\");\n  response.headers.set(\"Permissions-Policy\", \"geolocation=(), microphone=(), camera=()\");\n  if (process.env.NODE_ENV === \"production\") {\n    response.headers.set(\"Strict-Transport-Security\", \"max-age=31536000; includeSubDomains\");\n  }\n  return response;\n};\nconst loggingMiddleware = async ({ event, resolve }) => {\n  const start = Date.now();\n  const { method, url } = event.request;\n  console.log(`[Flux] ${method} ${url} - Started`);\n  const response = await resolve(event);\n  const duration = Date.now() - start;\n  response.headers.set(\"X-Response-Time\", `${duration}ms`);\n  console.log(`[Flux] ${method} ${url} - ${response.status} (${duration}ms)`);\n  return response;\n};\nconst rateLimitMiddleware = async ({ event, resolve }) => {\n  if (event.url.pathname.startsWith(\"/api/\")) {\n    const rateLimitResponse = await generalRateLimit(event);\n    if (rateLimitResponse) {\n      return rateLimitResponse;\n    }\n  }\n  return resolve(event);\n};\nconst cacheMiddleware = async ({ event, resolve }) => {\n  const response = await resolve(event);\n  if (event.locals.cacheKey && event.locals.cacheTtl) {\n    cacheResponse(event.locals.cacheKey, response, event.locals.cacheTtl).catch((error) => {\n      console.error(\"[Flux Cache] Failed to cache response:\", error);\n    });\n  }\n  return response;\n};\nconst handle = sequence(\n  corsMiddleware,\n  securityMiddleware,\n  loggingMiddleware,\n  rateLimitMiddleware,\n  cacheMiddleware\n);\nconst handleError = async ({ error, event }) => {\n  const errorId = crypto.randomUUID();\n  console.error(`[Flux Error ${errorId}]`, {\n    error: error?.toString(),\n    stack: error?.stack,\n    url: event.url.toString(),\n    method: event.request.method,\n    userAgent: event.request.headers.get(\"user-agent\"),\n    timestamp: (/* @__PURE__ */ new Date()).toISOString()\n  });\n  if (process.env.NODE_ENV === \"development\") {\n    return {\n      message: error?.message || \"Internal server error occurred in Flux backend\",\n      errorId,\n      stack: error?.stack,\n      details: {\n        url: event.url.pathname,\n        method: event.request.method\n      }\n    };\n  } else {\n    return {\n      message: \"Internal server error occurred in Flux backend\",\n      errorId\n    };\n  }\n};\nexport {\n  handle,\n  handleError\n};\n"],"names":[],"mappings":"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"}